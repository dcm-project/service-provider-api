// Package v1alpha1 provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package v1alpha1

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"H4sIAAAAAAAC/+xaeVPjOBb/KirtVvVMVYITcJju/MeQ1Ey6gWaBzNRsV1dKsV8SNbakluRAluK7b8m3",
	"Y8UkHDPMLv+AbR3v+r1DT7nDHg8FZ8C0wv07rLwFhCR+PCaaBHz+G4Ub8yokFyA1hXjQSwYnVEMYf8gf",
	"qvPIktCATAOYCMmX1AdZna1XAnAfKy0pm+P7VvaBSElW5t2nSgRkNWEkBOuCjQMSFI+kB5NrynzLjIIY",
	"n34DT9uoa65JYNb6oDxJhaac4T6+Mp8Ri8IpSMRnKNUGSsTKt6FMwxykndRQSi7dTseiW+5DnWY8H8Vj",
	"LQy3JBQB4L7b6dTJtTCYyfU9RmxJAuojykSkCz5LGpHwPaISfNz/km7ydTPv7lN5d3fg/SI1J2JcoxmP",
	"mP9UAXpPVX5vR+VrkIwESIFcUg9QMu/xQpynHmXxOkF/5UrXeTBf0fjiBM24RHoBKPNKdHQ+KouGF1qL",
	"vuME3CPBgivdf99536kz26oSWKd3GYUhkSvjI5ep1DnXZWqfoin8RqVG5k9EAnRKvAVlYFtV4wCYLzhl",
	"FnGH6Yihb6Rt5MFZdp1laCNA/frWY0a/R4CoD0zTGQWZq7SRSHf/ANze4U9teP9h2u7u+wdt4vYO2+7+",
	"4WHX7f7kdjpWLWdRrsrEGQlhK9muoyksqdS2rQ1wiNlQ1Ql8zseQADnjMgQfcVaFTq7/EsUv+JfhFW7h",
	"83H89/Ol+TcYngyvhgbL28f/5L0WgFeiUXAWhYaHZYKmSZigCbewTzSZEmUePc40oQxi5ypUVV/T7J+x",
	"ZWKMpDOrLtHKnbEE1IrSa67dwrdtAqKdJTDc1zKCksOf0MS3q07P4FZPBJnDRPNrYLasdQ0shqkELSks",
	"KZvHGjQrkVlpVCpBRYFWFfjA6qP49/HocPRtuDrdH3fOrv44OPl97H7+faRPrz5en666i7PBeP/k6l+r",
	"s29/3J4Nhgdng6Ob0+OPH2yQs9cC/5Qww338D6coSZy0HnFy49Ygct8QGU9BE2PxurICMoUgiZW+T42C",
	"SHBemdEc6PBxpDQPUbqPhQcJc2tIHIAI+CoEplE6pazpSLWBKKuf5vWMx5nSktC0ZHukAHk+LW9nkeM/",
	"nEGjFPGEsgxG4x6YbLdBljUPSjdItWHLdBcwp0qDBH9zzitXpHV+j5TiHiUa/Eqxtls6ObdEvNrysIS5",
	"bRCdY/SBUHwZCcGlEaA0a5dIKnMlToi21VdmONkYaRqC0iQUuIVN1DcLjF2hbUYa0ZlV2xvQlobI2vq0",
	"KJrYcm0W4Ytka91BEx2pBqulEyxLI2Fks+vlhCiNkgk7q+V+I5YTPV/A9whssXwHDJpyzla5ZTHWFG5d",
	"hwjqzGgArwCxpRrh+GJ4dDXELXwxPBo8skBoAk5apKkaftAP4/Fo8GNFb71eB967nU4b9j9M227Xd9vk",
	"p+5h23UPD3s911RmnQdjWYmbSr7Pddyc+mv4UIIzBXWAhKAUmVsC82UMcpSNWz31/zMOVATLY0Fhf+Jp",
	"utzNiVf25oi9vFk34OOdrmbBbU1TKKCJtfVM2pghHzhOPCE9PRJvj+jyVDHXAKiX6yAVkNmme2Q+UTbj",
	"ScOCaeIZjdVKvMHxae10lB70A+pBGliSoyU+EsRbANrfM0EukkGaSVTfcW5ubvZIPLzH5dxJ1yrnZHQ8",
	"PLsctvf3OnsLHQaxvFTH3rSB7hKkSphbdkkgFqSbYoYRQXEfH+x1YgYE0YtY5Q7xQ8qcFJPmyxwsUevI",
	"zCpyouZoSeEmj/xZzXdD9QLlPcmK1nPcjnzcx7+ATvufcWWahOGYof2ka2TUDokLECEC6sVrnW8qqfkT",
	"933Iucst1tioa6fvT0Y5vWckmPe9LNQq/SlTYMSNJzNPJV2cRC3rOo1npFZKI8xqVzORIECF/zebJQu9",
	"L2mXSnj/2xkmt0JsmQWQQC82WuTXeBh5C/Cu495AQ9Co2uKEKp2s3mCKus4qLJcpJ6xW8qaVW0MzRouN",
	"S5W494wGGiSarrIao872eQlggkgSgo6pfrnD1JD5HkEMsDQ0pvsUllzPA19fEIuVps9GLLrPjUXXjsWf",
	"iY9kemp5ZS6QY6OA0X0LC2sf/FiCOc8RxEpJQhQNxCpkktml/mKqgZ+5v3p2OyfiF2eKtPe3hq/uC9F9",
	"w5YVWzleas3mauBy7rLHkX+fwC4Abe2fme+IPAy+ZGYJfLaAZcqlIl4VPOB1JJWjWF5gRxG1XabVo5r7",
	"p6DujKOMxl+HPvcZhc2vS/9eoK9htNyEt6ZnU4XUIY2mRCXXRlHSjxkNbIXd64B4538/sL5BOwWqKOFZ",
	"RBY8j5O2L2EIbqnSlM0fjtdHQgSrvwzLb3XJm/u8vPtkfrGhHMp6cs5d9vSJMv8+L5MePt7ZmgHx6ZQg",
	"JcCjM+ohudZKrh/z6teGlgNfQ38a/QB7870WejejAbxroXf5TwbMyzJ89yNu2Ry6LHWjSz93OtrqKt1y",
	"mVq/VH87CjQeM63Nqo2nzUzjttpoJ1BnG21OL68Ozc+fkGwXqFvlps4LsZDe0VnwVL1yijwPlJpFwZsn",
	"xZ7U4Bbb5ZGtT9sXEPJlyenKN2G7eeCYyaf44DN7WGvTDelokP06rlSnPr703LIzsH79n+E9WKGIFSHz",
	"zyyi8g528avh11ZL5ZpZO5E0nbALsNbyEJqucncaDRBh/gOQzu9UKiXBG6pfIGNUi67NRdabbxTHdAvE",
	"k+2SdQk4k/tqB99/vf9vAAAA//8o3UFf0jIAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
